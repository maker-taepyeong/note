# 2023-11-08 TIL

> "레이아웃 작업에 table을 사용하지 말라"

테이블은 데이터를 표 형식으로 표현할 때 사용하는 것이 쓰임새다.
flex, grid 개념이 나오기 전에는 레이아웃을 테이블로 구성했다.
테이블보다 reflow 빈도가 낮게, repaint 영역을 작게 만들어 레이아웃에 적합하게 설계한 것이 flex, grid다.

테이블은 내용이 변하면 전체를 다시 그리게 된다. 따라서 정적인 데이터를 표 형식으로 표시할 때 사용하는 것이 적합하다.

## 원문

### 질문

"table 태그는 퍼포먼스 이슈가 있으니까 grid로 구현 해주세요!"

안녕하세요 ⁠어디다물어볼지몰라여기에물어봅니다

첫줄에 적은 문장은 제가 일터에서 들은 말입니다.

저는 몰랐던 이슈라 여기저기 자료를 찾아봤는데

주로 table, performance, layout 세 가지 단어가 공통적으로 언급됐고,

https://wikibook.co.kr/article/web-sites-optimization-3/

2012년 발간된 '자바스크립트 성능 이야기: NHN은 이렇게 한다!' 책에서

역사적인 맥락을 파악할 수 있었습니다.

DHTML 기술이 나오기 전에는 화면 전체의 레이아웃을 잡기 위해 table을 즐겨 사용했다.
당대 브라우저 시장은 IE 강세였고, IE는 table 내부 요소 파싱이 완료된 다음에야 화면을 표시했다.
파이어폭스는 당시에도 표 내부의 요소를 부분 렌더링 하는 기능이 있었다.
크로스 브라우징 측면에서 table을 사용하지 않거나 최적화하는 기법이 중요했다.

여기서 궁금한 점이 몇가지가 생겼습니다.

지금 브라우저는 당시 브라우저에 비해 많이 진보 했을텐데 table 사용이 렌더링 성능을 떨어뜨린다고 확언할 수 있을까?
화면 전체 레이아웃이 아닌 데이터를 '표'로 표현하기 위한 용도에서도 grid 구성이 상위호환이라고 할 수 있을까?
다양한 디바이스 크기에 유연하게 지원하기 어렵다는 약점이 있다는데 그 주장의 근거는 무엇일까?

직접 실험을 설계할 수 있다면 좋겠는데 무엇을 해야할지 막막하네요.
그외에도 참고할만한 자료나 경험, 의견 모두 환영입니다.

감사합니다 🙇‍♂️

### 답변

1
우선 table과 grid는 그 목적이 다릅니다.
데이터를 표 형태로 표현하고자 만들어진 것이 table이며 grid는 2차원의 레이아웃을 하기 위해서 만들어졌습니다.

table의 경우, "표"를 그린다는 목적에 따라 하나의 셀이 변경이 되면 전체가 다시 그려져야 합니다.
표는 셀뿐만 아니라 열과 행이 같이 변경이 되어야 하니까요.

특히나 rowspan이나 colspan이 있는 경우거나, 내부 컨텐츠들이 달라질때마다 전체를 다 그려야 합니다.
물론 그래야 하는게 표이구요.

반면 grid의 경우에는 유사해보이나 미리 레이아웃의 규격을 잡고 만드는 방식이기에 계산을 하는 방식에서 유리할 수 있습니다.

브라우저는 당연히 진보를 했고 PC나 모바일의 성능도 좋아졌기에 table이 렌더링 성능을 떨어뜨린다라기 보다는,
표를 그리는 것과 레이아웃을 그리는것에 있어서 표의 특성상 셀이 바뀌면 전체를 계산해야하는 로직이 더 많을 수 밖에 없습니다.

렌더링 성능을 떨어뜨리는게 아니라 레이아웃을 하기 위해서 table을 쓴다면 당연히 비효율이 맞습니다.
flexbox, grid가 나오기 전에는 레이아웃을 table로 했으니까요. flexbox는 대략 2012, grid는 2017년 쯤 부터인가 제대로 쓸 수 있었습니다.

2
레이아웃을 아닌 데이터를 "표"로 표현하기 위한 용도로만 당연히 table을 쓰는게 더 좋습니다.
grid는 table의 상위호환이 아닙니다. 둘의 역할은 엄연히 다르고 grid는 표를 만드는데 있어서 table보다 훨씬 더 복잡성을 요구합니다.
Admin등을 구성을 할때 데이터를 표로 만드는 것을 굳이 grid로 바꿔야 할 필요는 없다고 생각합니다.

3
table는 HTML을 통해서 구조를 강제해야합니다. (물론 css의 display속성으로 어거지로 바꿀 수 있으나 대부분은 그렇게 쓰지 않을겁니다.)
뿐만 안니라 table-head, table-row의 구조로 인해서 row가 강제되기 때문에 wrap에 있어서 취약합니다.

(그런데 표라면 당연히 wrap을 하면 안되겠죠;;;)

grid는 2차원 배열을 표기하지만 한번에 배치하는 구조를 가변적으로 조절하기 편합니다. 2xN 3xN 4xN 등등 단일 객채를 격자형으로 배치하는데 유리하며, Grid Column Layout등을 통해서 반응형으로 디자인을 하기에도 유리합니다.

결론적으로 표를 만들거라면 table을 쓰면 됩니다.
"table을 쓰지 마세요." 라는 구호는 엄밀히 말해서 "table로 레이아웃을 하지 마세요" 입니다.
당시에야 방법이 없으니 울며 겨자먹기로 table로 레이아웃을 했다면 지금은 레이아웃용 css인 flex, grid를 지원하고 있으니까요.

본래 용도에 맞게 사용하는 것은 아무런 문제가 되지않는다고 생각을 합니다.

ps.
굳이 테스트를 하고 싶다면 table을 통해서 엄청나게 많은 양의 컨텐츠를 만들고 내부 컨텐츠를 변경하면서 크롬의 performance를 체크해보시고,
layout이나 repaint의 범위를 볼 수 있는 체크를 해보세요.
같은 방법으로 grid를 통해서도 해보시면 실험을 해볼 수 있을 거라고 생각합니다.

table은 컨텐츠의 변경에 따라 전체 reflow가 발생하는 빈도가 높고, repaint 영역이 큽니다.
grid의 경우에는 미리 layout이 규격화 되므로 전체 reflow가 발생하는 빈도가 낮고, repaint 영역이 커지는 경우가 드뭅니다.

그렇지만 애초에 "표"와 "레이아웃"은 사용목적이 다른 것이니 굳이 둘을 바꿔가면서 작업을 해야할 필요가 있나? 라는 생각은 듭니다.
다만 table을 가지고 레이아웃을 하고 있다면 지양해야겠죠. 🙂
